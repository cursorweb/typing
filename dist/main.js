(()=>{"use strict";var t=[{title:"English",desc:"English words",list:["the","be","of","and","a","to","in","he","have","it","that","for","they","with","as","not","on","she","at","by","this","we","you","do","but","from","or","which","one","would","all","will","there","say","who","make","when","can","more","if","no","man","out","other","so","what","time","up","go","about","than","into","could","state","only","new","year","some","take","come","these","know","see","use","get","like","then","first","any","work","now","may","such","give","over","think","most","even","find","day","also","after","way","many","must","look","before","great","back","through","long","where","much","should","well","people","down","own","just","because","good","each","those","feel","seem","how","high","too","place","little","world","very","still","nation","hand","old","life","tell","write","become","here","show","house","both","between","need","mean","call","develop","under","last","right","move","thing","general","school","never","same","another","begin","while","number","part","turn","real","leave","might","want","point","form","off","child","few","small","since","against","ask","late","home","interest","large","person","end","open","public","follow","during","present","without","again","hold","govern","around","possible","head","consider","word","program","problem","however","lead","system","set","order","eye","plan","run","keep","face","fact","group","play","stand","increase","early","course","change","help","line"]},{title:"Spanish",desc:"Spanish words",list:["como","su","que","él","era","para","en","son","con","ellos","ser","uno","tener","este","desde","por","caliente","palabra","pero","qué","algunos","es","lo","usted","o","tenido","la","de","a","y","un","nos","lata","otros","eran","hacer","tiempo","si","cómo","dicho","cada","decir","hace","conjunto","tres","querer","aire","así","también","jugar","pequeño","fin","poner","leer","mano","puerto","grande","deletrear","añadir","incluso","tierra","aquí","debe","alto","tal","siga","acto","hierro","preguntar","hombres","cambio","porque","luz","tipo","fuego","imagen","tratar","nosotros","animal","punto","madre","mundo","cerca","construir","auto","padre","cualquier","nuevo","trabajo","parte","tomar","conseguir","lugar","hecho","vivir","donde","después","atrás","poco","ronda","hombre","años","vino","buena","me","dar","nuestro","bajo","nombre","muy","forma","frase","gran","pensar","ayudar","línea","caja","causa","mucho","ciudad","antes","movimiento","derecho","niño","viejo","demasiado","misma","ella","todo","hay","cuando","hasta","uso","camino","acerca","muchos","entonces","escribir","haría","éstos","largo","cosa","ver","dos","tiene","buscar","más","día","podía","ir","venir","hizo","número","sonar","no","personas","mi","sobre","saber","agua","llamada","primero","puede","abajo","lado","estado","ahora","encontrar","bien","siempre","mayor","menor","mientras","quien","ayer","pasado","medio","nunca","poder","veces","fiesta","grupo","cuenta","noche","gente","cuerpo","semana","segundo","varios","libro","persona","fuera","casa","solo","mujer","sistema","vida"]}],e=document.querySelector(".wpmresults"),n={results:document.querySelector(".wpmresults-page"),typing:document.querySelector(".typing-page"),select:document.querySelector(".warmup-select")},o=n.select;function r(t){o.classList.add("hide"),(o=t).classList.remove("hide")}var s=function(){function t(t){this.name=t,this.chars=0,this.correct=0,this.wrong=0}return t.prototype.begin=function(){this.start=new Date},t.prototype.end=function(){this.endTime=new Date},t.prototype.calcWpm=function(){var t=this.chars/5,e=this.chars-this.correct,n=(this.endTime.getTime()-this.start.getTime())/6e4;return Math.max(0,(t-e/5)/n)},t.prototype.calcAcc=function(){var t=this.chars;return 100*(1-this.wrong/t)},t}(),a=new(function(){function t(){var t=this;this.resetOnWrong=null,this.inputEl=document.querySelector(".user-input"),this.testCont=document.querySelector(".test-cont"),this.focusOverlay=document.querySelector(".overlay"),this.testTitle=document.querySelector(".test-title"),this.focusTynput(),document.addEventListener("keydown",this.focusTynput.bind(this)),this.testCont.addEventListener("click",this.focusTynput.bind(this)),this.focusOverlay.addEventListener("click",this.focusTynput.bind(this)),this.inputEl.addEventListener("focus",(function(){t.focusOverlay.classList.add("hide"),t.tynputFocused=!0})),this.inputEl.addEventListener("blur",(function(){t.focusOverlay.classList.remove("hide"),t.tynputFocused=!1})),this.inputEl.addEventListener("keydown",(function(e){if("Backspace"==e.key){if(0==t.cIdx)return;t.els[t.cIdx].classList.remove("curr","wrong","correct"),t.cIdx--,t.els[t.cIdx].classList.remove("wrong","correct"),t.els[t.cIdx].classList.add("curr")}})),this.inputEl.addEventListener("input",(function(){var e=t.inputEl.value.normalize();if(t.inputEl.value="",0==t.cIdx&&(t.testResult.begin(),t.paceWpm&&t.initPaceCaret()),t.els[t.cIdx].classList.remove("curr"),t.text[t.cIdx]==e)t.els[t.cIdx].classList.add("correct"),t.testResult.correct++;else{if(t.resetOnWrong)return void t.resetOnWrong();t.els[t.cIdx].classList.add("wrong"),t.testResult.wrong++}if(t.testResult.chars++,t.cIdx++,t.cIdx>=t.els.length)return t.testResult.end(),void t.listener._endTest(t.testResult);t.els[t.cIdx].classList.add("curr")}))}return t.prototype.focusTynput=function(t){void 0===t&&(t=null),this.tynputFocused||(null==t||t.preventDefault(),this.inputEl.focus(),this.focusOverlay.classList.add("hide"))},t.prototype.newTest=function(t,e,n){var o;this.clear(),this.testTitle.textContent=t,this.cIdx=0,this.text=e,this.listener=n,this.testResult=new s(t);var r=e.split("");this.els=[];for(var a=0,i=r;a<i.length;a++){var c=i[a],u=document.createElement("pre");u.textContent=c,u.classList.add("char")," "==c&&u.classList.add("space"),this.els.push(u)}this.els[0].classList.add("curr"),(o=this.testCont).append.apply(o,this.els)},t.prototype.clear=function(){this.cIdx=0,this.testResult=null,this.testCont.textContent="",this.paceInt&&(clearInterval(this.paceInt),this.paceInt=null)},t.prototype.createPacer=function(t){this.paceWpm=t},t.prototype.initPaceCaret=function(){this.pIdx=-1,this.pacerTick(),this.paceInt=setInterval(this.pacerTick.bind(this),6e4/(5*this.paceWpm))},t.prototype.pacerTick=function(){var t;null===(t=this.els[this.pIdx])||void 0===t||t.classList.remove("pace-caret"),this.pIdx++,this.pIdx>=this.els.length?clearInterval(this.paceInt):this.els[this.pIdx].classList.add("pace-caret")},t}()),i=function(){function t(){}return t.prototype.newTest=function(t,e){a.newTest(t,e,this)},t.prototype._endTest=function(t){this.endFn(t)},t.prototype.onEnd=function(t,o){void 0===o&&(o=!0),this.endFn=function(s){e.textContent="",t(s),o&&r(n.results)}},t}();function c(t){return t[Math.floor(Math.random()*t.length)]}var u,l=function(){function t(){this.listener=new i}return t.prototype.end=function(){a.clear()},t.prototype.genText=function(t,e,n){return void 0===n&&(n=50),function(t,e,n){for(var o="",r=0;r<e-1;r++)o+=c(t)+(n?"":" ");return o+c(t)}(t,n,e)},t.prototype.createResultEl=function(t){var e=t.calcWpm(),n=t.calcAcc(),o=t.name,r=document.createElement("div");r.classList.add("wpmresult");var s=document.createElement("div");s.textContent=o;var a=document.createElement("div");a.textContent="WPM: "+e.toFixed(2);var i=document.createElement("div");return i.textContent="Acc: "+n.toFixed(2),r.append(s,a,i),r},t}(),p=(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},u(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(n){function o(o,r){var s=n.call(this)||this;return s.pacer=t[o],s.options=r,s.startWpm=r.startWpm,100==r.minAccuracy&&(a.resetOnWrong=function(){s.begin()}),s.listener.onEnd((function(t){var n=t.calcWpm(),o=t.calcAcc();n>=s.startWpm&&o>=s.options.minAccuracy&&(s.startWpm+=s.options.nextWpm);var r=document.createElement("div");r.textContent="Next WPM: "+s.startWpm,e.append(r,s.createResultEl(t))})),s}return p(o,n),o.prototype.begin=function(){var t=this.genText(this.pacer.list,!1);this.listener.newTest(this.pacer.title,t),a.createPacer(this.startWpm)},o.prototype.end=function(){n.prototype.end.call(this),a.paceWpm=null,a.resetOnWrong=null},o}(l),h=[{title:"Left Hand DV",desc:"Left Hand Only! (Dvorak Layout)",list:["a","o","e","u","'",",",".","p","y","i",";","q","j","k","1","2","3","4","5","6","`"],noSpace:!0},{title:"Right Hand DV",desc:"Right Hand Only! (Dvorak Layout)",list:["d","h","t","n","s","-","f","g","c","r","l","/","=","\\","x","b","m","w","v","z","7","8","9","0","[","]"],noSpace:!0},{title:"Spanish Accents",desc:"All spanish accents, including ü and ç",list:["á","é","í","ó","ú","Á","É","Ó","Í","Ú","ñ","Ñ","ç","Ç","ü","Ü"],noSpace:!0}],f=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t){function n(n){var o=t.call(this)||this;return o.test=h[n],o.listener.onEnd((function(t){e.append(o.createResultEl(t))})),o}return f(n,t),n.prototype.begin=function(){var t=this.genText(this.test.list,this.test.noSpace);this.listener.newTest(this.test.title,t)},n}(l),y=["a","o","e","'",",",".","p","y","i",";","q","j","k","x","1","2","3","4","5","6","`"],v=["d","t","n","s","-","f","g","c","r","l","/","=","\\","x","b","m","w","v","z","7","8","9","0","[","]"],w=["a","b","c","d","e","f","g","h","i","j","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],g=["`","1","2","3","4","5","6","7","8","9","0","-","=","[","]","\\",";","'",",",".","/"],b=["~","!","@","#","$","%","^","&","*","(",")","_","+","{","}","|",":",'"',"<",">","?"],x=[{title:"Keyboard Jump Left Hand",desc:"Jump to another key and then jump back to U! (Dvorak Layout)",gen:function(t){for(var e="",n=0;n<t/2;n++)e+="u",e+=c(y);return e},qwerty:"no"},{title:"Keyboard Jump Right Hand",desc:"Jump to another key and then jump back to H! (Dvorak Layout)",gen:function(t){for(var e="",n=0;n<t/2;n++)e+="h",e+=c(v);return e},qwerty:"no"},{title:"Shift Key Practice",desc:"Type the letter or the capital verson!",gen:function(t){for(var e="",n=0;n<t/2;n++)e+=c(w),e+=c(w).toUpperCase();return e}},{title:"Special Character Practice",desc:"Type the lower case version, and then the upper case, or the other way around!",gen:function(t){for(var e="",n=0;n<t/2;n++){var o=Math.floor(Math.random()*g.length);Math.random()<.5?e+=g[o]+b[o]:e+=b[o]+g[o]}return e}}],E=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(t){function n(n){var o=t.call(this)||this;return o.test=x[n],o.listener.onEnd((function(t){e.append(o.createResultEl(t))})),o}return E(n,t),n.prototype.begin=function(){var t=this.test.gen(50);this.listener.newTest(this.test.title,t)},n}(l),S=[{title:"English",desc:"Basic English Warmup",tests:[{title:"Two-Letter Pairs",list:["th","ar","he","te","an","se","in","me","er","sa","nd","ne","re","wa","ed","ve","es","le","ou","no","to","ta","ha","al","en","de","ea","ot","st","so","nt","dt","on","ll","at","tt","hi","el","as","ro","it","ad","ng","di","is","ew","or","ra","et","ri","of","sh","ti"],noSpace:!1},{title:"Two-Letter Words",list:["of","to","in","it","is","be","as","at","so","we","he","by","or","on","do","if","me","my","up","an","go","no","us","am"],noSpace:!1},{title:"Three-Letter Words",list:["the","and","for","are","but","not","you","all","any","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use"],noSpace:!1},{title:"Alphabet",list:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],noSpace:!0},{title:"Numbers",list:["1","2","3","4","5","6","7","8","9","0"],noSpace:!0},{title:"Special Characters",list:["~","`","!","@","#","$","%","^","&","*","(",")","_","+","-","=","{","}","[","]","<",">","|","\\",":",'"',";","'",",",".","/","?"],noSpace:!0}]},{title:"Spanish",desc:"Spanish Monkeytype Warmup",tests:[{title:"Two-letter pairs",list:["er","en","ar","ra","ue","on","es","de","ie","re","os","ma","no","ca","nt","do","tr","to","po","ad","so","un","te","st","ro","ta","ir","co","qu","an","ho","as","al","la","da","or","br","ce","ch","nd","vi","sa"],noSpace:!1},{title:"Three-letter pairs",list:["ien","ent","con","cho","que","son","est","nto","uer","bre","tra","ado","era","ste","nte","per","ero","gun","nos","tro","ran","ace","cer","tie","unt","ier","egu","omb","mbr","ndo","baj","ajo","ema","sta","ona"],noSpace:!1},{title:"Alfabeto",list:["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","ñ","z","x","c","v","b","n","m","á","é","í","ó","ú","ü"],noSpace:!0},{title:"Special Characters",list:["¡","¿","?","!",'"',"$","%","&","/","(",")","=","*",":",";","-","_"],noSpace:!0}]}],T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t){function o(o){var s=t.call(this)||this;return s.warmup=S[o],s.warmupIndex=0,s.testResults=[],s.listener.onEnd((function(t){if(s.warmupIndex++,s.testResults.push(t),s.warmupIndex>=s.warmup.tests.length){for(var o=[],a=0,i=s.testResults;a<i.length;a++){var c=i[a];o.push(s.createResultEl(c))}return e.append.apply(e,o),r(n.results),s.warmupIndex=0,void(s.testResults=[])}s.begin()}),!1),s}return T(o,t),o.prototype.begin=function(){var t=this.warmup.tests[this.warmupIndex],e=this.genText(t.list,t.noSpace);this.listener.newTest(t.title,e)},o}(l),_=document.querySelector(".warmup>.selection"),I=document.querySelector(".tests>.selection"),O=document.querySelector(".pacer>.selection"),j=null;function q(t,e){for(var o=[],s=function(s){var i=t[s],c=document.createElement("div");c.classList.add("select-mode");var u=document.createElement("div");u.classList.add("title"),u.textContent=i.title;var l=document.createElement("div");l.classList.add("desc"),l.textContent=i.desc,c.append(u,l),c.addEventListener("click",(function(){null==j||j.end(),r(n.typing),e(s),a.focusTynput(),j.begin()})),o.push(c)},i=0;i<t.length;i++)s(i);return o}_.append.apply(_,q(S,(function(t){j=new k(t)}))),I.append.apply(I,q(h,(function(t){j=new m(t)}))),I.append.apply(I,q(x,(function(t){j=new L(t)}))),O.append.apply(O,q(t,(function(t){j=new d(t,{startWpm:130,nextWpm:5,minAccuracy:100})})));var W=document.querySelector(".shortcut-reset"),C=document.querySelector(".shortcut-exit");W.addEventListener("click",(function(){j&&(j.begin(),a.focusTynput(),r(n.typing))})),C.addEventListener("click",(function(){j&&(j.end(),r(n.select))})),document.body.addEventListener("keydown",(function(t){"Tab"==t.key&&(t.preventDefault(),W.click()),"Escape"==t.key&&(t.preventDefault(),C.click())}))})();